# =============================================================================
# MySQL 8.4 自訂配置
# =============================================================================
# 本配置針對開發環境優化，包含字元集、時區、效能等設定
# =============================================================================

[mysqld]
# -----------------------------------------------------------------------------
# 字元集配置 - 使用 UTF-8 支援中文
# -----------------------------------------------------------------------------
character-set-server = utf8mb4
collation-server = utf8mb4_unicode_ci
character-set-client-handshake = FALSE

# -----------------------------------------------------------------------------
# 時區配置
# -----------------------------------------------------------------------------
default-time-zone = '+08:00'

# -----------------------------------------------------------------------------
# 連線配置
# -----------------------------------------------------------------------------
# 最大連線數
max_connections = 200
# 連線逾時（秒）
wait_timeout = 28800
interactive_timeout = 28800

# -----------------------------------------------------------------------------
# InnoDB 配置
# -----------------------------------------------------------------------------
# 緩衝池大小（開發環境設定為 256MB）
innodb_buffer_pool_size = 256M
# 日誌檔案大小
innodb_log_file_size = 64M
# 每次交易都寫入日誌（資料安全）
innodb_flush_log_at_trx_commit = 1

# -----------------------------------------------------------------------------
# 查詢快取配置（MySQL 8.0+ 已移除，此處為相容性保留註解）
# -----------------------------------------------------------------------------
# query_cache_type = 0
# query_cache_size = 0

# -----------------------------------------------------------------------------
# 慢查詢日誌（開發環境開啟）
# -----------------------------------------------------------------------------
slow_query_log = 1
slow_query_log_file = /var/lib/mysql/slow-query.log
long_query_time = 2

# -----------------------------------------------------------------------------
# 一般日誌（開發環境可開啟，正式環境應關閉）
# -----------------------------------------------------------------------------
general_log = 0
general_log_file = /var/lib/mysql/general.log

# -----------------------------------------------------------------------------
# 錯誤日誌
# -----------------------------------------------------------------------------
log_error = /var/lib/mysql/error.log

# -----------------------------------------------------------------------------
# SQL 模式
# -----------------------------------------------------------------------------
sql_mode = STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION

# -----------------------------------------------------------------------------
# 允許外部連線
# -----------------------------------------------------------------------------
bind-address = 0.0.0.0

[mysql]
# 客戶端字元集
default-character-set = utf8mb4

[client]
# 客戶端字元集
default-character-set = utf8mb4
